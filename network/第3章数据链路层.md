- [问题3-1. 旧版的《计算机网络》认为数据链路层的任务是在两个相邻结点间的线路上无 差错地传送以帧 (frame)为单位的数据 。 数据链路层可以把一条有可能出差错的实际 链路转变成为让网络层向下看起来好像是 一 条不出差错的链路。但最近新版的 《计算机网络》(第 4 版到第 7 版)中对数据链路层的提法就改变了。 数据链路层的传输不能让网络层向下看起来好像是 一 条不出差错的链路 。 到底哪一种说法是正确的?](#问题3-1-旧版的计算机网络认为数据链路层的任务是在两个相邻结点间的线路上无-差错地传送以帧-frame为单位的数据--数据链路层可以把一条有可能出差错的实际-链路转变成为让网络层向下看起来好像是-一-条不出差错的链路但最近新版的-计算机网络第-4-版到第-7-版中对数据链路层的提法就改变了-数据链路层的传输不能让网络层向下看起来好像是-一-条不出差错的链路--到底哪一种说法是正确的)
- [问题 3-2. 当数据链路层使用 PPP 协议或 CSMA/CD 协议时，既然不保证可靠传输，那么为什么对所传输的帧进行差错检验呢?](#问题-3-2-当数据链路层使用-ppp-协议或-csmacd-协议时既然不保证可靠传输那么为什么对所传输的帧进行差错检验呢)
- [问题 3-3. 为什么旧版本的教材在数据链路层一章中讲授可靠传输，但现在新版本教材则 取消了可靠传输?](#问题-3-3-为什么旧版本的教材在数据链路层一章中讲授可靠传输但现在新版本教材则-取消了可靠传输)
- [问题 3-4. 通过普通的电话用户线拨号上网时(使用调制解调器)，试问一对用户线可容许多少个用户同时上网?](#问题-3-4-通过普通的电话用户线拨号上网时使用调制解调器试问一对用户线可容许多少个用户同时上网)
- [问题3-5. 除了差错检测外，面向字符的数据链路层协议还必须解决哪些特殊的问题?](#问题3-5-除了差错检测外面向字符的数据链路层协议还必须解决哪些特殊的问题)
- [问题 3-6. 为什么计算机进行通信时发送缓存和接收缓存总是需要的?](#问题-3-6-为什么计算机进行通信时发送缓存和接收缓存总是需要的)
- [问题 3-7. 以太网使用载波监听多点接入碰撞检测协议 CSMA/CD。频分复用 FDM 使用载波。以太网有没有使用频分复用?](#问题-3-7-以太网使用载波监听多点接入碰撞检测协议-csmacd频分复用-fdm-使用载波以太网有没有使用频分复用)
- [问题 3-8. 在以太网中，不同的传输媒体会产生不同的传播时延吗?](#问题-3-8-在以太网中不同的传输媒体会产生不同的传播时延吗)
- [问题 3-9. 在以太网中发生了碰撞是否说明这时出现了某种故障?](#问题-3-9-在以太网中发生了碰撞是否说明这时出现了某种故障)
- [问题 3-11. 是什么原因使以太网有一个最小帧长和最大帧长?](#问题-3-11-是什么原因使以太网有一个最小帧长和最大帧长)
- [问题 3-12. 在双绞线以太网中，其连接导线只需要两对线: 一 对线用千发送，另 -对线 用千接收。 但现在的标准是使用 RJ-45 连接器。这种连接器有 8 根针脚， 一共可连 接 4 对线，这是否有些浪费?是否可以不使用 RJ-45 而使用 RJ-11?](#问题-3-12-在双绞线以太网中其连接导线只需要两对线-一-对线用千发送另--对线-用千接收-但现在的标准是使用-rj-45-连接器这种连接器有-8-根针脚-一共可连-接-4-对线这是否有些浪费是否可以不使用-rj-45-而使用-rj-11)

### 问题3-1. 旧版的《计算机网络》认为数据链路层的任务是在两个相邻结点间的线路上无 差错地传送以帧 (frame)为单位的数据 。 数据链路层可以把一条有可能出差错的实际 链路转变成为让网络层向下看起来好像是 一 条不出差错的链路。但最近新版的 《计算机网络》(第 4 版到第 7 版)中对数据链路层的提法就改变了。 数据链路层的传输不能让网络层向下看起来好像是 一 条不出差错的链路 。 到底哪一种说法是正确的?
解答:旧版的 《计算机网络》对数据链路层的阐述是基千 OSI 体系结构的 。 OSI 体系结 构的数据链路层采用的是面向连接的 HDLC 协议，它提供可靠传输的服务。因此，旧版《计 算机网络》的提法是与 OSI 体系结构 一 致的 。
2003 年以后新版的《计算机网络》更加突出 了 TCP/IP 体系 结构。现在互联网的数据链 路层协议使用得最多的就是 PPP 协议和 CSM凶CD 协议(这种情况就是使用拨号入网或使用 以太网入网)。这两种协议**都不使用序号和确认机制**，因此也就不能“让网络层向下看起来好 像是一条不出差错的链路。”所以，新版《计算机网络》的提法**符合当前计算机网络的现状**。 当接收端通过差错检测发现帧在传输中出了差错，或者默默丢弃(silently discard)而不进行任何其他处理(当使用 PPP 协议或 CSM幻CD 协议时)，这是现在的大多数情况;或者使用重传机制要求发送方重传(当使用 HDLC协议时)，但这种情况现在很少使用。
如果需要可靠传输，那么就由高层的 TCP 协议负责重传。但数据链路层并不知道这是重传的帧。

### 问题 3-2. 当数据链路层使用 PPP 协议或 CSMA/CD 协议时，既然不保证可靠传输，那么为什么对所传输的帧进行差错检验呢?
解答:当数据链路层使用 PPP 协议或 CSMA/CD 协议时，在数据链路层的接收端对所传输的帧进行差错检验是为了不将已经发现的有差错的帧(不管是什么原因造成的)收下来。 如果在接收端不进行差错检测，那么接收端上交给主机的帧就可能包括在传输中出了差错的帧，而这样的帧对接收端主机是没有用处的。
换言之，接收端进行差错检测的目的是:“上交主机的帧都是没有传输差错的，有差错的都已经丢弃了。”或者更加严格地说，应当是:“我们以很接近千 1 的概率认为，凡是上交主机的帧，都是没有传输差错的 。”

### 问题 3-3. 为什么旧版本的教材在数据链路层一章中讲授可靠传输，但现在新版本教材则 取消了可靠传输?
解答:保证可靠传输的停止等待协议是计算机网络协议的基础内容之 一。新的版本只是挪动了可靠传输这部分内容的位置，而不是取消这部分内容。
把这部分放在前面的数据链路层 一章中讲的好处是，可以更早些建立可靠传输的概念(因为我们是自下而上，先讲数据链路层，后讲运输层)。但缺点是实际上的数据链路层现在基本 上并不使用可靠传输，因此放在数据链路层中讲可靠传输有些不符合实际。况且以后到运输 层用到可靠传输时，学生有可能又会遗忘了一些。
把这部分内容放在运输层中讨论的好处是比较符合实际情况，讲完简单的可靠传输的概念后，接着就介绍比较复杂的滑动窗口概念可以取得更好的效果。这也是作者试图改变一下整个教材的结构的一种尝试。

### 问题 3-4. 通过普通的电话用户线拨号上网时(使用调制解调器)，试问一对用户线可容许多少个用户同时上网?
 解答:这并没有限制 。 但用户数目越多，则每一个用户的上网速率就越低。
多个用户共同使用一对电话线拨号上网有时是很有用的 。 例如， 一个办公室内只有一对电话用户线可供拨号上互联网，但办公室内有多人在办公，他们都有自己的 PC, 而且都想同时使用拨号上网 。 这时可将所有用户的 PC 都用以太网连接起来(当然每 一 台 PC 都必须安装 一 个以太网卡) 。 只有 一 台 PC 要特殊些，即需要同时安装以太网卡和拨号上网卡(或使用外
置的调制解调器)。这台特殊的 PC 通常叫做代理服务器，它通过调制解调器用拨号方式与本地的 ISP 相连。代理服务器必须安装专门的软件(如 Wingate 2.0), 同时还要完成一些必要的配置，这样就能使连接在以太网上的各 PC 用共享一个调制解调器的方式同时上网。 ISP 并不知道有多少人共享一个调制解调器。 ISP 只知道现在是这台代理服务器在使用拨号上网。 ISP 只需分配一个临时的 IP 地址给此代理服务器暂时使用 。

### 问题3-5. 除了差错检测外，面向字符的数据链路层协议还必须解决哪些特殊的问题?
解答:最主要的就是要解决**帧定界**和**透明传输**的问题。
帧定界就是要使接收端能够知道一帧的开始和结束是在什么地方。面向字符的数据传输就是所传输的数据全都是一个个的字符，例如 ASCII 字符。因此，在每一帧的开始和结束的地方，必须有 一个 特殊的字符来作为标志 ，字符 SOH 代表 Start Of Header (首部开始) ，而 EOT 代表 End Of Transmission (传输结 束)。请注意， SOH 和 EOT 都是 ASCII 码中的控制字符。 SOH 的十六进制编码是 01, 而 EOT 的十六进制编码是 04。不要误认为 SOH 是 "S" "O" "H" 三个字符， 也不要误认为 EOT 是"E" "O" "T" 三个字符。
解决了帧定界后，在接收端就可以确定一个帧的开始和结束，剩下的问题就是透明传输的问题。
**透明传输**实际上就是随便什么字符都可以传输 。但设想我 们在帧中传送的字符出现了 一 个控制字符 "EOT"。那么接收端收到这样的数据后，就会将原来的 SOH 和数据中的 "EOT" 错误地解释为一个帧，但对后面剩下的字符根本就无法解释(图Q-3-5-a)。
像这样的传输显然就不是"透明传输"，因为当遇到数据中的字符 "EOT" 时就传不过去 了，它被接收端解释为控制字符。实际上此处的字符 "EOT " 并非控制字符而是一般数据 。 为了解决透明传输问题 ， 就必须设法将数据中可能出现的控制字符 "SOH" 和 "EOT" 在接收瑞不解释为控制字符。方法是:在数据中出现字符 "SOH" 或 "EOT" 时就将其转换为另一个字符，而这个字符是不会被错误解释的 。 但所有字符都有可能在数据中出现。千是 就想出了这样的办法:将数据中出现的字符 "SOH" 转换为 "ESC" "X" 这样两个字符，将数据中出现的字符 "EOT" 转换为 "ESC" "y" 这样两个字符。而当数据中出现了控制字符
"ESC" 时，就将其转换为 "ESC" "z" 这样两个字符。这种转换方法就能够在接收端正确 地还原为原来的数据。 "ESC" 是转义符， 它的十六进制编码是 1B。
读者可以很容易地看出，在接收端只要按照以上转换规则进行相反的转换，就能够还原出原来的数据(例如遇到 "ESC" "z" 就还原为 "ESC") 。
以上就是实现透明传输的原理。

### 问题 3-6. 为什么计算机进行通信时发送缓存和接收缓存总是需要的? 
解答:当计算机的两个进程(在同一台机器中或在两个不同的机器中)进行通信时，如果发送进程将数据直接发送给接收进程，那么这两个动作(一个是发送，另一个是接收)是 非常难以协调好的。这是因为计算机的动作很快，如果在某一时刻接收进程开始执行接收的 动作，但发送进程的发送动作稍微早了一点或稍微晚了一点(在收发双方事先未进行同步的 情况下，**发送时刻不可能恰好和接收时刻精确地重合**)，这都会使接收失败。因此，在计算机
进程之间的通信过程中，广泛使用缓存。 缓存就是在计算机的存储器中设置的一个临时存放数据的空间。发送进程将欲发送的数
据先写入缓存，然后接收进程在合适的时机读出这些数据。 缓存有点像邮局在街上设立的邮筒 。 我们可以在方便时将欲发送的信件丢到邮筒中。邮局的邮递员按照他的计划在适当时候打开邮筒，将大家投入的信件取走，交到邮局，进行下 一步处理。
缓存可以很好地解决发送速率和接收速率不一致的矛盾，还可以很方便地进行串并转换， 即比特流串行写入并行读出，或并行写入串行读出。
缓存也可称为“缓冲”或“缓冲区”。英文就是 buffer。

### 问题 3-7. 以太网使用载波监听多点接入碰撞检测协议 CSMA/CD。频分复用 FDM 使用载波。以太网有没有使用频分复用?
解答:这里的"载波”并非指频分复用 FDM 的载波 。 CSMA/CD 协议的发明者故意使用了大家早已熟悉的旧名词 Carrier (载波)来表示连接在以太网上的工作站检测到了其他工作站发送到以太网上的电信号 。

### 问题 3-8. 在以太网中，不同的传输媒体会产生不同的传播时延吗?
解答:是的 。在以太网中，不同的传输媒体会产生不同的传播时延。表 Q-3-8 是典型的测量结果:

### 问题 3-9. 在以太网中发生了碰撞是否说明这时出现了某种故障? 
解答:还不能这样看。
以太网中发生碰撞是很正常的现象。发生碰撞只是表明在以太网上同时有两个或更多的 站在发送数据。碰撞的结果是这些站所发送的数据都没有用了，都必须进行重传。以太网上 发生碰撞的机会是多还是少，与以太网上的通信量强度有很大的关系。这并没有一个绝对的定量的准则。很难说具有多大的碰撞次数就属千坏的以太网。

### 问题 3-11. 是什么原因使以太网有一个最小帧长和最大帧长?
解答:我们知道，在以 太网上发送一个帧时，并非全网都能瞬时地检测 出这个帧的发送 。 这是因为电磁波在以太网上的传播速度是有限的。当某个站刚刚发送数据后不久就检测到发 生冲突时，就必须丢弃这个受到损伤的帧。这种帧就是因发生碰撞而异常中止的短帧。如果 一个站只有非常少的数据要发送，帧就会很短。如果让这种帧在以太网上传送，那么就无法 和因发生碰撞而异常中止的短帧相区分。前者是有用的帧，而后者是无用的帧。
现在设置最小帧长就是为了区分开这两种情况。对千有用的非常短的帧，以太网标准规 定要在数据部分进行填充，使其长度达到以太网标准规定的最小帧长的长度。因发生碰撞而 异常中止的短帧的长度肯定都是小于最小帧长的长度。
如果以太网上偶尔出现噪声，这也会形成很短的帧，其长度也是小于以太网标准规定的 最小帧长的长度。规定了最小帧长就可以把由噪声产生的短帧丢弃。
设置最大帧长是为[保证各个站都能公平竞争接入到以太网。因为如果某个站发送特长 的数据帧，则其他的站就必须等待很长的时间才能发送数据。

 ### 问题 3-12. 在双绞线以太网中，其连接导线只需要两对线: 一 对线用千发送，另 -对线 用千接收。 但现在的标准是使用 RJ-45 连接器。这种连接器有 8 根针脚， 一共可连 接 4 对线，这是否有些浪费?是否可以不使用 RJ-45 而使用 RJ-11?
解答:对 千 IOBASE-T 以太网的确只使用两对线。这样在 RJ-45 连接器中就空出来 4 根针脚 。 对千 100BASE-T4 快速以太网，则要用到 4 对线，即 8 根针脚都要用到 。
顺便指出，采用 RJ-45 而不采用电话线的 RJ-11 也是为了避免将以太网的连接线插头错误地插进电话线的插孔内。另外， RJ-11 只有 6 根针脚，而 RJ-45 有 8 根针脚 。 这两种连接器 在形状上的区别如图 Q-3-12 所示。可以看出，插头 RJ-45 要比插头 RJ-11 略大一些。

